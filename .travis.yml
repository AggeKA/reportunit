language: csharp
solution: ReportUnit.sln
branches:
  only:
    - master

addons:
  apt:
    packages:
      - oracle-java8-set-default

install:
  - nuget restore ReportUnit.sln
  - nuget install NUnit.Runners -Version 3.6.0 -OutputDirectory NUnitRunner

script:
  - xbuild /p:Configuration=Release ReportUnit.sln
  - mono ./NUnitRunner/NUnit.ConsoleRunner.3.6.0/tools/nunit3-console.exe ./ReportUnitTest/bin/Release/ReportUnitTest.dll

deploy:
  provider: releases
  api_key: d01600a4dbf6bfc759e68d56865b960b4e7e57db
  file: $TRAVIS_BUILD_DIR/ReportUnit/bin/Release/ReportUnit.exe
  skip_cleanup: true
  overwrite: true
  on:
    tags: true
